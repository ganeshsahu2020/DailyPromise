/* ---------------- Tailwind layers ---------------- */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------------- Brand & base tokens (dark default) ---------------- */
:root {
  /* Brand colors */
  --brand-deep:#0b1a2b;      /* deep navy */
  --brand-emerald:#00a572;   /* emerald */
  --brand-gold:#c08a2f;      /* gold accent */
  --brand-coral:#ff6f61;
  --brand-card:#1f2b38;
  --brand-border:rgba(255,255,255,.08);
  --brand-text:#e8f0f7;

  /* Base typography / rendering */
  font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",
    Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
  line-height:1.5;
  font-weight:400;

  /* Dark-only color scheme */
  color-scheme:dark;
  color:rgba(255,255,255,0.87);
  background-color:var(--brand-deep);

  font-synthesis:none;
  text-rendering:optimizeLegibility;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* Hindi font helper */
.font-devanagari{
  font-family:"Noto Sans Devanagari",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
}

/* ---------------- Base elements ---------------- */
a{
  font-weight:500;
  color:var(--brand-coral);
  text-decoration:inherit;
}
a:hover{
  color:color-mix(in oklab,var(--brand-emerald) 40%,var(--brand-coral));
}

body{
  margin:0;
  min-width:320px;
  min-height:100vh;
  display:block;
  background-color:var(--brand-deep);
  color:var(--brand-text);
}

/* Accessible skip link */
.skip-link{
  position:absolute;
  left:-999px;
  top:auto;
  width:1px;
  height:1px;
  overflow:hidden;
}
.skip-link:focus,
.skip-link:focus-visible{
  left:1rem;
  top:1rem;
  width:auto;
  height:auto;
  padding:0.5rem 0.75rem;
  background:rgba(0,0,0,0.7);
  color:#fff;
  z-index:60;
  border-radius:6px;
}

/* ---------------- Buttons & focus ---------------- */
button{
  border-radius:8px;
  border:1px solid transparent;
  padding:0.6em 1.2em;
  font-size:1em;
  font-weight:500;
  font-family:inherit;
  background-color:rgba(255,255,255,0.04);
  cursor:pointer;
  transition:transform 180ms ease,box-shadow 180ms ease,background-color 180ms ease;
  will-change:transform,box-shadow;
}
button:hover{transform:translateY(-3px);}
button:active{transform:translateY(-1px) scale(0.998);}
button:focus,
button:focus-visible{outline:none;}

/* Emerald focus ring helper */
:where(input,textarea,select,button):focus-visible,
:where(.focusable):focus-visible{
  box-shadow:0 0 0 4px color-mix(in oklab,var(--brand-emerald) 40%,transparent);
  border-radius:0.6rem;
}

/* ---------------- Utilities ---------------- */
.glass{
  background:color-mix(in oklab,var(--brand-card) 86%,transparent);
  border:1px solid var(--brand-border);
  box-shadow:0 6px 24px color-mix(in oklab,#000 12%,transparent);
  backdrop-filter:blur(10px);
  -webkit-backdrop-filter:blur(10px);
}

.icon-gradient{
  background-image:linear-gradient(135deg,#22d3ee,#10b981,#c084fc);
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
  display:inline-block;
  transition:transform 200ms ease,filter 200ms ease;
}
.icon-gradient:focus,
.icon-gradient:hover{
  transform:scale(1.06);
  filter:brightness(1.05);
}

/* Animated nav dot */
.nav-dot{
  height:8px;
  width:8px;
  border-radius:9999px;
  background:linear-gradient(90deg,#22d3ee,#10b981,#c084fc);
  transition:transform 220ms ease,box-shadow 220ms ease;
}
.nav-dot.pulse{
  animation:pulseGlow 2.4s ease-in-out infinite;
}

/* ---------------- Charts & Recharts fixes ---------------- */
.chart-container{
  min-width:300px;
  min-height:300px;
  width:100%;
  height:100%;
  position:relative;
}
.recharts-wrapper{
  min-width:300px !important;
  min-height:300px !important;
}
.recharts-responsive-container{
  min-width:300px !important;
  min-height:300px !important;
}
.recharts-default-tooltip{
  background:color-mix(in oklab,var(--brand-card) 95%,transparent) !important;
  border:1px solid var(--brand-border) !important;
  border-radius:8px !important;
  backdrop-filter:blur(10px) !important;
  -webkit-backdrop-filter:blur(10px) !important;
}
.recharts-legend-wrapper{padding:10px 0 !important;}

@media (max-width:640px){
  .chart-container{min-width:280px;min-height:280px;}
  .recharts-responsive-container{
    min-width:280px !important;
    min-height:280px !important;
  }
}

/* Report charts */
.report-chart-container{
  min-width:300px;
  min-height:400px;
  width:100%;
  height:100%;
  position:relative;
}
.report-chart-container .recharts-responsive-container{
  min-width:300px !important;
  min-height:400px !important;
}

.charts-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
  gap:1.5rem;
  align-items:start;
}
.charts-grid .chart-container{min-height:350px;}

@media print{
  .chart-container{
    min-width:400px !important;
    min-height:400px !important;
    page-break-inside:avoid;
  }
  .recharts-responsive-container{
    min-width:400px !important;
    min-height:400px !important;
  }
}

/* ---------------- Motion & accessibility ---------------- */
@keyframes pulseGlow{
  0%,100%{
    transform:scale(1);
    box-shadow:0 0 0 0 color-mix(in oklab,var(--brand-emerald) 40%,transparent);
  }
  50%{
    transform:scale(1.1);
    box-shadow:0 0 0 4px color-mix(in oklab,var(--brand-emerald) 20%,transparent);
  }
}

@media (prefers-reduced-motion:reduce){
  .nav-dot.pulse,
  .icon-gradient,
  .glass,
  button,
  *{
    animation-duration:0.001ms !important;
    animation-iteration-count:1 !important;
    transition-duration:1ms !important;
    scroll-behavior:auto !important;
  }
  .recharts-default-tooltip{
    backdrop-filter:none !important;
    -webkit-backdrop-filter:none !important;
  }
}

/* Misc utilities */
.focus-ring{outline:none;}
.focus-ring:focus-visible{
  box-shadow:0 0 0 4px color-mix(in oklab,var(--brand-emerald) 40%,transparent);
}
.min-h-dvh{min-height:100dvh;}

/* TwoPane layout helpers */
.two-pane{
  display:grid;
  grid-template-columns:1fr;
  gap:1rem;
}
@media (min-width:1024px){
  .two-pane{
    grid-template-columns:320px 1fr;
    align-items:start;
  }
  .two-pane .aside{
    position:sticky;
    top:calc(1rem + env(safe-area-inset-top));
    align-self:start;
  }
}

/* Modest transitions */
.transition-modest{
  transition:transform 200ms ease,box-shadow 200ms ease,
    background-color 180ms ease,border-color 180ms ease;
}

/* High contrast text */
.text-high{
  color:color-mix(in oklab,var(--brand-text) 90%,black 0%);
}
